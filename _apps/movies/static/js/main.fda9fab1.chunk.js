(this["webpackJsonpdev-pages"]=this["webpackJsonpdev-pages"]||[]).push([[0],{45:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){"use strict";a.r(t);var s=a(1),r=a.n(s),n=a(9),i=a.n(n),c=a(13),l=a(8),o=a.n(l),d=a(10),u=a(4),j=a(5),m=a(7),b=a(6),h=a(11),g=a.n(h),v=a(3);var p=function(e){var t,a=document.getElementById("popup");return t=a,r.a.useEffect((function(){function e(e){t.getElementsByClassName("detail")[0].contains(e.target)||t.getElementsByClassName("detail__close")[0].click()}return document.addEventListener("click",e),function(){document.removeEventListener("click",e)}})),i.a.createPortal(e.children,a)},O=(a(45),a(0));var _=function(e){return Object(O.jsxs)("div",{className:"detail",children:[Object(O.jsx)("div",{className:"detail__close",onClick:e.onClose,children:"x"}),Object(O.jsxs)("div",{className:"detail__content",children:[Object(O.jsx)("h1",{children:e.title}),Object(O.jsx)("img",{src:e.large_cover_image,alt:e.title,title:e.title}),Object(O.jsx)("h6",{children:e.year}),e.rating&&0<e.rating?Object(O.jsxs)("h6",{children:[e.rating," / 10"]}):null,e.genres&&e.genres.map((function(e,t){return Object(O.jsx)("h6",{children:e},t)})),e.summary&&Object(O.jsxs)("div",{children:[Object(O.jsx)("h3",{children:"Synopsis"}),Object(O.jsx)("div",{children:e.summary})]}),e.yt_trailer_code&&Object(O.jsxs)("div",{children:[Object(O.jsx)("h3",{children:"Trailer"}),Object(O.jsx)("iframe",{className:"detail__video",title:e.slug,src:"https://www.youtube.com/embed/".concat(e.yt_trailer_code),allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})]})]})]})},y=(a(47),function(e){Object(m.a)(a,e);var t=Object(b.a)(a);function a(e){var s;return Object(u.a)(this,a),(s=t.call(this,e)).handleError=function(){s.props.onError(s.state.id)},s.state={id:e.id,title:e.title,slug:e.slug,genres:e.genres,rating:e.rating,large_cover_image:e.large_cover_image,year:e.year,summary:e.summary,yt_trailer_code:e.yt_trailer_code,state:e.state},s.openMovie=s.openMovie.bind(Object(v.a)(s)),s.closeMovie=s.closeMovie.bind(Object(v.a)(s)),s.handleError=s.handleError.bind(Object(v.a)(s)),s}return Object(j.a)(a,[{key:"openMovie",value:function(){this.setState({isOpenMovie:!0})}},{key:"closeMovie",value:function(){this.setState({isOpenMovie:!1})}},{key:"render",value:function(){var e=this.state,t=e.title,a=e.slug,s=e.genres,r=e.rating,n=e.large_cover_image,i=e.year,c=e.summary,l=e.yt_trailer_code,o=e.state,d=e.isOpenMovie;return Object(O.jsxs)("div",{className:"movie",children:[Object(O.jsxs)("div",{className:"figure",onClick:this.openMovie,children:[Object(O.jsx)("img",{src:n,alt:t,title:t,onError:this.handleError}),Object(O.jsxs)("div",{className:"figcaption",children:[r&&0<r?Object(O.jsxs)("div",{children:[r," / 10"]}):null,s&&s.map((function(e,t){return Object(O.jsx)("div",{children:e},t)}))]})]}),Object(O.jsx)("div",{className:"title",onClick:this.openMovie,children:Object(O.jsx)("span",{children:t})}),Object(O.jsx)("div",{className:"year",children:Object(O.jsx)("span",{children:i})}),d&&Object(O.jsx)(p,{children:Object(O.jsx)(_,{title:t,slug:a,genres:s,rating:r,large_cover_image:n,year:i,summary:c,yt_trailer_code:l,state:o,onClose:this.closeMovie})})]})}}]),a}(r.a.Component)),x=(a(48),function(e){Object(m.a)(a,e);var t=Object(b.a)(a);function a(e){var s;return Object(u.a)(this,a),(s=t.call(this,e)).handleChange=function(e){s.props.onSelect(e.target.value)},s.state={name:e.name,value:e.value.toUpperCase(),options:e.options},s.handleChange=s.handleChange.bind(Object(v.a)(s)),s}return Object(j.a)(a,[{key:"render",value:function(){var e=this.state,t=e.name,a=e.value,s=e.options;return Object(O.jsxs)("form",{className:"cb_box",children:[Object(O.jsx)("label",{className:"cb_box__label",children:t}),Object(O.jsx)("select",{className:"cb_box__control",value:a,onChange:this.handleChange,children:s.map((function(e,t){return Object(O.jsx)("option",{value:e,children:e},t)}))})]})}}]),a}(r.a.Component)),f=(a(49),function(e){Object(m.a)(a,e);var t=Object(b.a)(a);function a(e){var s;return Object(u.a)(this,a),(s=t.call(this,e)).state={id:e.id,title:e.title,slug:e.slug,genres:e.genres,rating:e.rating,large_cover_image:e.large_cover_image,year:e.year,summary:e.summary,yt_trailer_code:e.yt_trailer_code,state:e.state},s.openSearch=s.openSearch.bind(Object(v.a)(s)),s.closeSearch=s.closeSearch.bind(Object(v.a)(s)),s}return Object(j.a)(a,[{key:"openSearch",value:function(){this.setState({isSearchPopup:!0})}},{key:"closeSearch",value:function(){this.setState({isSearchPopup:!1})}},{key:"render",value:function(){var e=this.state,t=e.title,a=e.slug,s=e.genres,r=e.rating,n=e.large_cover_image,i=e.year,c=e.summary,l=e.yt_trailer_code,o=e.state,d=e.isSearchPopup;return Object(O.jsxs)("div",{className:"item",children:[Object(O.jsx)("img",{className:"image",src:n,alt:t,title:t,onClick:this.openSearch}),Object(O.jsxs)("div",{className:"data",onClick:this.openSearch,children:[Object(O.jsx)("h6",{className:"title",children:t}),Object(O.jsx)("h6",{className:"year",children:i})]}),d&&Object(O.jsx)(p,{children:Object(O.jsx)(_,{title:t,slug:a,genres:s,rating:r,large_cover_image:n,year:i,summary:c,yt_trailer_code:l,state:o,onClose:this.closeSearch})})]})}}]),a}(r.a.Component)),N=(a(50),function(e){Object(m.a)(a,e);var t=Object(b.a)(a);function a(e){var s;return Object(u.a)(this,a),(s=t.call(this,e)).handleChange=function(){var e=Object(d.a)(o.a.mark((function e(t){var a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.target.value){e.next=4;break}document.getElementsByClassName("searchbar")[0].getElementsByClassName("items")[0].style.display="block",e.next=6;break;case 4:return document.getElementsByClassName("searchbar")[0].getElementsByClassName("items")[0].style.display="none",e.abrupt("return");case 6:return e.next=8,g.a.get("".concat(s.props.url,"?query_term=").concat(t.target.value,"&limit=50"));case 8:a=e.sent,r=a.data.data.movies,s.setState({items:r});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.state={items:[]},s}return Object(j.a)(a,[{key:"render",value:function(){var e=this.state.items;return Object(O.jsxs)("div",{className:"searchbar",children:[Object(O.jsx)("input",{type:"text",className:"input",placeholder:"Search movies",onChange:this.handleChange}),Object(O.jsx)("div",{className:"items",children:e&&0<e.length&&e.map((function(e){return Object(O.jsx)(f,{title:e.title,genres:e.genres,rating:e.rating,large_cover_image:e.large_cover_image,year:e.year,summary:e.summary,yt_trailer_code:e.yt_trailer_code,state:e.state},e.id)}))})]})}}]),a}(r.a.Component)),S=(a(51),function(e){Object(m.a)(a,e);var t=Object(b.a)(a);function a(e){var s;return Object(u.a)(this,a),(s=t.call(this,e)).getMovies=Object(d.a)(o.a.mark((function e(){var t,a,r,n,i,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.state,a=t.sort_by,r=t.order_by,n=t.page,e.next=3,g.a.get("".concat(s.base_url,"?sort_by=").concat(a,"&order_by=").concat(r,"&page=").concat(n,"&limit=50"));case 3:i=e.sent,c=i.data.data.movies,s.setState({movies:c,isLoading:!1}),1<s.state.page?s.setState({prevDisable:!1}):s.setState({prevDisable:!0}),s.state.page<691?s.setState({nextDisable:!1}):s.setState({nextDisable:!0});case 8:case"end":return e.stop()}}),e)}))),s.errorImage=function(e){var t=s.state.movies;t.forEach((function(a,r){a.id===e&&s.setState({movies:[].concat(Object(c.a)(t.slice(0,r)),Object(c.a)(t.slice(r+1,t.length)))})}))},s.selectSort=function(e){s.setState({isLoading:!0,sort_by:e.toLowerCase()},(function(){s.getMovies()}))},s.selectOrder=function(e){s.setState({isLoading:!0,order_by:e.toLowerCase()},(function(){s.getMovies()}))},s.pagePrev=function(){1<s.state.page&&s.setState({isLoading:!0,page:s.state.page-1},(function(){s.getMovies()}))},s.pageNext=function(){s.state.page<691&&s.setState({isLoading:!0,page:s.state.page+1},(function(){s.getMovies()}))},s.base_url="https://yts.mx/api/v2/list_movies.json",s.state={isLoading:!0,sort_by:"rating",order_by:"desc",page:1},s}return Object(j.a)(a,[{key:"componentDidMount",value:function(){this.getMovies()}},{key:"render",value:function(){var e=this,t=this.state,a=t.isLoading,s=t.prevDisable,r=t.nextDisable,n=t.movies,i=t.sort_by,c=t.order_by;return Object(O.jsxs)("div",{className:"app",children:[Object(O.jsx)("h1",{className:"title",children:"Movie Box"}),!a&&Object(O.jsxs)("div",{className:"ctrl",children:[Object(O.jsxs)("div",{className:"ctrl__select",children:[Object(O.jsx)(x,{name:"Sort by",value:i,options:["RATING","TITLE","YEAR"],onSelect:this.selectSort},"sort_by"),Object(O.jsx)(x,{name:"Order by",value:c,options:["DESC","ASC"],onSelect:this.selectOrder},"order_by")]}),Object(O.jsx)("div",{className:"ctrl__search",children:Object(O.jsx)(N,{url:this.base_url})})]}),Object(O.jsx)("section",{className:"container",id:"popup",children:a?Object(O.jsx)("div",{className:"loader",children:Object(O.jsx)("span",{children:"Loading data..."})}):Object(O.jsx)("div",{className:"movies",children:n&&n.map((function(t){return t&&t.id&&t.title&&0<t.year&&Object(O.jsx)(y,{id:t.id,title:t.title,slug:t.slug,genres:t.genres,rating:t.rating,large_cover_image:t.large_cover_image,year:t.year,summary:t.summary,yt_trailer_code:t.yt_trailer_code,state:t.state,onError:e.errorImage},t.id)}))})}),!a&&Object(O.jsxs)("div",{className:"side",children:[Object(O.jsx)("button",{className:"left",onClick:this.pagePrev,disabled:s,children:"<"}),Object(O.jsx)("button",{className:"right",onClick:this.pageNext,disabled:r,children:">"})]})]})}}]),a}(r.a.Component));i.a.render(Object(O.jsx)(r.a.StrictMode,{children:Object(O.jsx)(S,{})}),document.getElementById("root"))}},[[52,1,2]]]);
//# sourceMappingURL=main.fda9fab1.chunk.js.map